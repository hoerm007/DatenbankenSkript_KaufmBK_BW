\documentclass[a4paper,12pt, headsepline, ngerman]{scrartcl}

\usepackage{scrlayer-scrpage}
\usepackage[nodisplayskipstretch]{setspace} %vspace before/after math mode
%\setstretch{5}
\raggedbottom
\raggedright
\onehalfspacing
%\renewcommand*{\familydefault}{\sfdefault}



\pagestyle{headings} %KOMA-Script mit Kopf-Fuß-Zeilen
\usepackage{hyperref}			%Hyperlinks setzen
\usepackage[answerdelayed]{exercise}			%Nach hyperref einbinden!
\usepackage{babel}				%Silbentrennung mit ngerman

\usepackage{booktabs} 			% For prettier tables

\usepackage{mathtools}  		%Mathe-Paket
\usepackage{amssymb}			%Symbole
\usepackage{bbm}				%\mathbbm{N} für natürliche Zahlen o.ä.
%\usepackage{graphicx}			%Optionen für \includegraphics{imagefile}
%Solte in mathtools beinhaltet sein
\usepackage{color}				%\textcolor{blue}{text...}
\usepackage[dvipsnames]{xcolor}
%Häufig verwendetet Farben
%ForestGreen 		RGB(  0,155, 85)
%YellowOrange		RGB(250,162, 26)

\usepackage[T1]{fontenc}		%Umlaute
\usepackage[utf8]{inputenc}
\usepackage{wrapfig}
\usepackage{caption}


\usepackage{ulem}
%\uline{important} underlined text
%\uuline{urgent} double-underlined text
%\uwave{boat} wavy underline
%\sout{wrong} line struck through word
%\xout{removed} marked over like //////////
%\dashuline{dashing} dashed underline
%\dotuline{dotty} dotted underline
\usepackage{cancel}					%Durchstreichen von Dingen in Formeln
\usepackage{enumitem}				%Aufzählungen [label=\alph*)]
\setlist[enumerate]{nosep, topsep=0pt}	%Kleinere Abstände bei Aufzählungen
\setlist[itemize]{noitemsep, topsep=0pt}

\usepackage{framed}                 %Rahmen machen \begin{framed} ... \end{framed}

\usepackage{tcolorbox} 				%Für Boxen um Text
\usepackage{array}
%Plots
\usepackage{tikz}
\usepackage{pgf}
\usepackage{pgfmath}

\usepackage{bm}						%\bm{xxx} for bold in math mode

\usepackage{geometry}
\geometry{a4paper, portrait, left=1.5cm, right=2cm, top=1cm, bottom=2cm, headsep=0.2cm, includehead, head=27.30193pt}
\usepackage{listings} %\lstinline[language=C]!while{$a || $b}!
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}
\definecolor{basiccolour}{rgb}{0.9,0,0.6}

\lstdefinestyle{mystyle}{
	language=SQL,
	backgroundcolor=\color{backcolour},
	commentstyle=\color{codegreen},
	keywordstyle=\color{magenta},
	numberstyle=\tiny\color{codegray},
	stringstyle=\color{codepurple},
	basicstyle=\color{basiccolour}\ttfamily,
	breakatwhitespace=false,
	breaklines=false,
	captionpos=b,
	keepspaces=false,
	extendedchars=true,
	numbers=left,
	numbersep=5pt,
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	tabsize=2,
	columns=fullflexible %erzeugt keine komischen Leerzeichen mehr, die man erst beim Kopieren sieht
}
\lstset{literate=%
	{Ö}{{\"O}}1
	{Ä}{{\"A}}1
	{Ü}{{\"U}}1
	{ß}{{\ss}}1
	{ü}{{\"u}}1
	{ä}{{\"a}}1
	{ö}{{\"o}}1
	{~}{{\textasciitilde}}1
}
\lstset{style=mystyle}

\usepackage{marvosym} %\Lightning
\usepackage{multirow}
\renewcommand{\mvchr}[1]{\Large{\mbox{\mvs\symbol{#1}}}} %\Lightning in math mode

\usetikzlibrary{intersections}

\setkomafont{headsepline}{\color{black}}

%Exercise-Paket Umbenennungen
\renewcommand{\listexercisename}{Liste der Aufgaben}%
\renewcommand{\ExerciseName}{Aufgabe}%
\renewcommand{\AnswerName}{L{\"o}sung zu Aufgabe}%
\renewcommand{\ExerciseListName}{Aufg.}%
\renewcommand{\AnswerListName}{L{\"o}sung}%
\renewcommand{\ExePartName}{Teil}%
\renewcommand{\ArticleOf}{von\ }%
%\renewcommand{\ExerciseHeaderTitle}{\ExerciseTitle}
\renewcommand{\ExerciseHeader}{%
	\textbf{\large\ExerciseHeaderDifficulty\ExerciseName\ %
	\ExerciseHeaderNB\normalsize\ExerciseHeaderTitle\ExerciseHeaderOrigin}\medskip}
\renewcommand{\AnswerHeader}{
	\medskip\textbf{L{\"o}sung zu \ExerciseName\ \ExerciseHeaderNB}\smallskip}


%Farbe für die Lösungen, die die Schüler selbst ausfüllen sollen
\definecolor{loes}{rgb}{1,1,1}
\definecolor{tcback}{rgb}{.95,.95,.95}
\definecolor{tcframe}{rgb}{.89,.15,.21}
\definecolor{loestc}{rgb}{.95,.95,.95}
%Arbeitsblatt-Modus
\definecolor{loes}{rgb}{.36,.58,.93}
\definecolor{loestc}{rgb}{1, .4, 1}
\tcbset{
%	frame code={}
%	center title,
%	left=0pt,
%	right=0pt,
%	top=0pt,
%	bottom=0pt,
	fonttitle=\large\bfseries,
	colback=tcback,
	colframe=tcframe,
%	width=\dimexpr\textwidth\relax,
%	enlarge left by=0mm,
%	boxsep=5pt,
%	arc=0pt,outer arc=0pt,
}
\tcbuselibrary{raster}

%\sqrt[\leftroot{0}\uproot{2}n]{x}
\begin{document}
	\setlength\parindent{0pt} %keine Einrückungen beim Start eines Paragraphen

	%Header
	\lohead{Datenbanken}
	%\cohead{} %im Arbeitsblatt
	\rohead{\phantom{08.12.23}}
	\lehead{lehead}
	\cehead{cehead}
	\rehead{rehead}
	\cofoot[]{}
	\cohead{\Large\textbf{Klausur}}
	\textbf{Name:}\\\phantom{ }\\
	Die Aufgaben 1 bis 3 beziehen sich auf die folgende Tabelle \lstinline!Schüler!:
	\begin{tabular}{lllll}
		\multicolumn{5}{c}{\lstinline!Schüler!}\\
		\hline
		\underline{\lstinline!SNR!}&\lstinline!Name!&\lstinline!Arbeitsgemeinschaft!&\lstinline!Klasse!&\lstinline!Klassenlehrer!\\
		\hline
		10&Max Kurz&Schach, Theater&BK21&Maier\\
		15&Lisa Betz&Schach, Tennis&BK11&Claus\\
		22&Ali Muth&			   &BK21&Maier\\
		78&Adan Keck&Tennis		   &JG2&Rost\\
	\end{tabular}\\
	
	\begin{Exercise}[title={Definiere die folgenden Begriffe und gib jeweils ein Beispiel aus der Tabelle \lstinline!Schüler! an. (6P)}, label=KABegriffeDefinieren]
		\begin{enumerate}
			\item Entitätstyp
			\item Entität
			\item Attribut
			\item Attributswert
		\end{enumerate}
	\end{Exercise}%
	\begin{Exercise}[title={Gib eine der drei im Untericht besprochenen Anomalien an und erkläre diese an Hand eines selbst gewählten Beispiels aus der Tabelle \lstinline!Schüler!. (3P)}, label=KAAnomalien]
	\end{Exercise}%
	\begin{Exercise}[title={Normalisiere die Tabelle \lstinline!Schüler!. (10P)}, label=KANormalisieren]
	\end{Exercise}%

	
	\begin{Exercise}[title={Erstelle ein ERM zu folgendem Sachverhalt. (9P)}, label=KAERMAufstellen]
		
		Die Superbank möchte die Informationen zu ihren Azubis auf einer Datenbank ablegen.
		
		\textbf{Anforderungsdefinition}\\
		Jeder Azubi ist genau einem Ressort (z.B. Controlling, Beratung, EDV) zugeordnet. Ein Azubi kann in mehreren Filialen tätig sein.
		
		\textbf{Daten:}
		\begin{itemize}
			\item Für jeden Azubi sollen Vor- und Nachname sowie das Ausbildungsjahr gespeichert werden.
			\item Für jedes Ressort soll die Bezeichnung gespeichert werden.
			\item Für die Filialen soll die Adresse gespeichert werden.
		\end{itemize}	
	\end{Exercise}%

	
	
	
	
	
	
	
	
	\begin{Answer}[ref=KABegriffeDefinieren]
		\begin{enumerate}
			\item Entitätstyp: Ein Entitätstyp ist die abstrakter Beschreibung von Objekten mit gleichen Eigenschaften, z.B. beschreibt der Entitätstyp \lstinline!Schüler! die verschiedenen Schüler, die alle die Eigenschaften \lstinline!Name!, \lstinline!Arbeitsgemeinschaft!, usw. haben.
			\item Entität: Eine tatsächliche Ausprägung eines Entitätstyps, z.B. stellt die erste Zeile die Entität des Schülers Max Kurz mit seinen weiteren Eigenschaften dar.
			\item Attribut: Ein Attribut ist eine Eigenschaft von meist mehreren eines Entitätstyps, z.B. hat der Entitätstyp \lstinline!Schüler! unter anderem  das Attribut Entitätstyp \lstinline!Klasse!.
			\item Attributswert: Wie der Name schon sagt ein spezifischer Wert, den das Attribut annimmt, z.B. nimmt das Attribut Entitätstyp \lstinline!Klasse! des Schülers Max Kurz den Wert BK21 an.
		\end{enumerate}
	\end{Answer}%
	\begin{Answer}[ref=KAAnomalien]
		\begin{enumerate}
			\item Änderungsanomalie: Tritt dann auf, wenn man einen Attributswert ändern will, aber nicht alle betroffenen Werte ändert, z.B. könnte man den Wert Tennis auf Hallentennis ändern wollen und ändert dann nur den Eintrag bei \lstinline!SNR! 78, vergisst jedoch den Eintrag bei \lstinline!SNR! 15 zu ändern.
			\item Einfügeanomalie: Tritt dann auf, wenn man Werte in die Datenbank einfügen will, aber wichtige Werte wie z.B. der Primärschlüssel fehlen. Dies könnte im Beispiel auftreten, wenn man eine neue AG gründen und eintragen möchte wie z.B. Fußball aber noch keine Schüler teilnehmen. In diesem Fall würde ein eintragen von Fußball unter \lstinline!Arbeitsgemeinschaft! zu dem Problem führen, dass der Primärschlüssel, die \lstinline!SNR! fehlt.
			\item Löschanomalie: Tritt dann auf, wenn man Daten aus der Datenbank löscht und dabei aus Versehen Daten löscht, die man behalten möchte. Verlässt im Beispiel der Schüler Max Kurz die Schule und wird aus der Datenbank gelöscht, so wird ebenfalls die Information gelöscht, dass es eine Theater-AG gibt.
		\end{enumerate}
	\end{Answer}%
	\begin{Answer}[ref=KANormalisieren]
		
		\begin{tabular}{llll}
			\multicolumn{4}{c}{\lstinline!Schüler!}\\
			\hline
			\underline{\lstinline!SNR!}&\lstinline!Vorname!&\lstinline!Name!&\lstinline!Klasse!\\
			\hline
			10&Max&Kurz&BK21\\
			15&Lisa&Betz&BK11\\
			22&Ali&MuthBK21\\
			78&Adan&Keck&JG2\\
		\end{tabular}
		\begin{tabular}{ll}
			\multicolumn{2}{c}{\lstinline!Arbeitsgemeinschaft!}\\
			\hline
			\underline{\lstinline!AGNR!}&\lstinline!Bezeichnung!\\
			\hline
			1&Schach\\
			2&Theater\\
			3&Tennis\\
			\phantom{ }&\\
		\end{tabular}
		\begin{tabular}{ll}
			\multicolumn{2}{c}{\lstinline!Klassen!}\\
			\hline
			\underline{\lstinline!Klasse!}&\lstinline!Klassenlehrer!\\
			\hline
			BK11&Claus\\
			BK21&Maier\\
			JG2&Rost\\
			\phantom{ }&\\
		\end{tabular}\\
		\begin{tabular}{ll}
			\multicolumn{2}{c}{\lstinline!AGTeilnahme!}\\
			\hline
			\underline{\lstinline!SNR!}&\underline{\lstinline!AGNR!}\\
			\hline
			10&1\\
			10&2\\
			15&1\\
			15&3\\
			78&3\\
		\end{tabular}
		\begin{minipage}{0.8\textwidth}
			Hinweis: Bei der Tabelle \lstinline!Klassen! kann man auch einen neuen Primärschlüssel wie \lstinline!KlassenNR! oder ähnliches verwenden. Bei der Tabelle \lstinline!AGTeilnahme! kann man statt des zusammengesetzten Primärschlüssels auch einen neuen Primärschlüssel wie \lstinline!AGTeilnahmeNR! verwenden.
		\end{minipage}
	\end{Answer}%
	\begin{Answer}[ref=KAERMAufstellen]
		\begin{minipage}{\textwidth}\centering
			\includegraphics[width=\linewidth]{./pics/KlausurNR4.png}
		\end{minipage}%
	\end{Answer}%



\newpage
\cohead{\Large\textbf{Lösung}}
\rohead{Lösung}
\shipoutAnswer
\end{document}



%\begin{Exercise}[title={xxxx}, label=xxxx]\\
%xxxx
%\end{Exercise}

%\begin{Answer}[ref=xxx]\\
%xxxx
%\end{Answer}
%\begin{Exercise}[title=xxxx}, label=xxxx]\\
%xxxx
%\end{Exercise}
%\newpage
%\begin{Answer}[ref=xxx]\\
%xxxx
%\end{Answer}


%\begin{figure}[h]
%	\centering
%	\includegraphics[width=0.8\textwidth]{\quadFkt/pics/steigungswinkel.png}
%\end{figure}